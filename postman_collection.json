{
	"info": {
		"_postman_id": "dsbd-hw2-merged-final",
		"name": "DSBD Homework 2 - Complete Test Suite",
		"description": "Suite di test completa per l'Homework 2.\nInclude tutti i test dell'HW1 adattati per Nginx + i nuovi test per Kafka e per le soglie.\n\n**Copertura:**\n1. **Infrastructure**: Nginx Routing, SSL, Healthchecks.\n2. **User Manager**: CRUD completo, Idempotenza, Validazione Input, IP Hashing.\n3. **Data Collector**: Gestione Interessi con Soglie (HW2), Validazione ICAO.\n4. **Data Operations**: Trigger Collezione Voli, Kafka, Statistiche Voli.\n\n**IMPORTANTE**: - Disabilitare 'SSL Verification' nei Settings di Postman.\n- Per essere certi di ricevere una mail, inserirne una reale in `test_email`.\n - Dato che aggiungere un interesse triggera automaticamente la collezione dei voli (qualora nessun utente abbia già espresso un interesse per un aeroporto con lo stesso ICAO) eseguendo la collection in modalità RUN, lo scheduler di raccolta periodica (avviato dalla route di Trigger) non eseguirà la collezione voli perché c'è già un'altro thread (quello avviato per quanto detto poc'anzi) che se ne sta occupando\n-Per quanto detto al punto precedente, se viene avviata la raccolta a seguito dell'aggiunta di un interesse tramite l'utilizzo della chiamata 2.1, NON verrà generata la mail, perchè (giustamente) quell'utente non aveva inserito high e low value (il test 2.1 è l'inserimento di un interesse 'Standard'), dunque si consiglia di testarlo avviando MANUALMENTE le chiamate 2.3 (che inserisce un interesse CON high e low value) e poi, se l'interessa non c'era, aspettare la fine della raccolta avviata in automatico; viceversa, se era presenta e lo abbiamo aggiornato, avviarla manualmente grazie alla chiamata 3.1",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "0. Infrastructure & Health",
			"item": [
				{
					"name": "0.1 Gateway Health (HTTP Redirect Check)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "http://localhost/health",
							"protocol": "http",
							"host": [
								"localhost"
							],
							"path": [
								"health"
							]
						},
						"description": "Verifica che Nginx risponda sulla porta 80 e faccia redirect o gestisca la richiesta."
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Gateway Responds (200/301)\", function () { pm.expect(pm.response.code).to.be.oneOf([200, 301, 302]); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "0.2 User Manager Service Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health",
								"users"
							]
						},
						"description": "Verifica routing Nginx -> User Manager"
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status 200\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Service is User Manager\", function () { var j = pm.response.json(); pm.expect(j.service).to.eql(\"user-manager\"); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "0.3 Data Collector Service Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/health/data",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"health",
								"data"
							]
						},
						"description": "Verifica routing Nginx -> Data Collector"
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status 200\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Service is Data Collector\", function () { var j = pm.response.json(); pm.expect(j.service).to.eql(\"data-collector\"); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "0.4 Scheduler Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/scheduler/status",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"scheduler",
								"status"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status 200\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Scheduler Active\", function () { var j = pm.response.json(); pm.expect(j.active).to.eql(true); });"
								],
								"type": "text/javascript"
							}
						}
					]
				}
			]
		},
		{
			"name": "1. User Manager Logic",
			"item": [
				{
					"name": "1.1 Register User (New)",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"pm.collectionVariables.set(\"current_request_id\", pm.variables.replaceIn('{{$guid}}'));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"User Created (201)\", function () { pm.response.to.have.status(201); });"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "X-Request-ID",
								"value": "{{current_request_id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"nome\": \"Test\",\n    \"cognome\": \"User\",\n    \"codice_fiscale\": \"TSTUSR80A01H501Z\",\n    \"iban\": \"IT60X0542811101000000123456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						}
					}
				},
				{
					"name": "1.2 Register User (Idempotency Retry)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Idempotency Works (201/200)\", function () { pm.expect(pm.response.code).to.be.oneOf([200, 201]); });",
									"pm.test(\"Same Request ID returned\", function () { var j = pm.response.json(); pm.expect(j.request_id).to.eql(pm.collectionVariables.get(\"current_request_id\")); });"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "X-Request-ID",
								"value": "{{current_request_id}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"nome\": \"Test\",\n    \"cognome\": \"User\",\n    \"codice_fiscale\": \"TSTUSR80A01H501Z\",\n    \"iban\": \"IT60X0542811101000000123456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						},
						"description": "Usa lo stesso X-Request-ID e lo stesso IP. Dovrebbe ritornare la risposta cachata."
					}
				},
				{
					"name": "1.3 Register User (Validation Error)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation Error (400)\", function () { pm.response.to.have.status(400); });"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Request-ID",
								"value": "{{$guid}}",
								"type": "text"
							},
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"email-dirty\",\n    \"nome\": \"\",\n    \"cognome\": null,\n    \"codice_fiscale\": \"123\",\n    \"iban\": \"\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						}
					}
				},
				{
					"name": "1.4 Verify User Exists",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/verify/{{test_email}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"verify",
								"{{test_email}}"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"User Exists\", function () { var j = pm.response.json(); pm.expect(j.exists).to.eql(true); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "1.5 Get User Detail",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/{{test_email}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{test_email}}"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status 200\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Correct Email\", function () { var j = pm.response.json(); pm.expect(j.user.email).to.eql(pm.collectionVariables.get(\"test_email\")); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "1.6 Get User (Not Found)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/utente-inesistente@test.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"utente-inesistente@test.com"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Not Found (404)\", function () { pm.response.to.have.status(404); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "1.7 Get All Users",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status 200\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Count > 0\", function () { var j = pm.response.json(); pm.expect(j.count).to.be.above(0); });"
								],
								"type": "text/javascript"
							}
						}
					]
				}
			]
		},
		{
			"name": "2. Data Collector (Interests & Thresholds)",
			"item": [
				{
					"name": "2.1 Add Interest (Standard)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"airport_icao\": \"{{test_airport}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/interests",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Interest Created (201)\", function () { pm.response.to.have.status(201); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "2.2 Add Interest (Duplicate Check)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"airport_icao\": \"{{test_airport}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/interests",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Already Exists (200)\", function () { pm.response.to.have.status(200); });",
									"var jsonData = pm.response.json();",
									"pm.expect(jsonData.already_exists).to.eql(true);"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "2.3 Update Interest (Add Thresholds)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"airport_icao\": \"{{test_airport}}\",\n    \"high_value\": 1,\n    \"low_value\": 0\n}"
						},
						"url": {
							"raw": "{{base_url}}/interests",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests"
							]
						},
						"description": "Aggiorna l'interesse esistente aggiungendo i parametri HW2: High Value e Low Value. I parametri sono volutamente bassi per triggerare facilmente l'invio della mail"
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Updated (200)\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Values Set\", function () { \n    var j = pm.response.json(); \n    pm.expect(j.interest.high_value).to.eql(1);\n    pm.expect(j.interest.low_value).to.eql(0);\n});"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "2.4 Update Interest (Validation Error)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"airport_icao\": \"{{test_airport}}\",\n    \"high_value\": 5,\n    \"low_value\": 50\n}"
						},
						"url": {
							"raw": "{{base_url}}/interests",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests"
							]
						},
						"description": "Tenta di settare High < Low. Deve fallire."
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Validation Failed (400)\", function () { pm.response.to.have.status(400); });",
									"pm.test(\"Error Message Correct\", function () { \n    pm.expect(pm.response.json().error).to.include(\"maggiore di low_value\"); \n});"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "2.5 Add Interest (Dirty ICAO - 400)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"{{test_email}}\",\n    \"airport_icao\": \"ABCDEFG\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/interests",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Invalid ICAO (400)\", function () { pm.response.to.have.status(400); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "2.6 Add Interest (Unknown User)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"fantasma@nonesiste.it\",\n    \"airport_icao\": \"LIRF\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/interests",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"User Not Found (404)\", function () { pm.response.to.have.status(404); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "2.7 Get User Interests",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/interests/{{test_email}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests",
								"{{test_email}}"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status is 200\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Contains LIRF\", function () { var j = pm.response.json(); pm.expect(j.interests[0].airport_icao).to.eql(\"LIRF\"); });"
								],
								"type": "text/javascript"
							}
						}
					]
				}
			]
		},
		{
			"name": "3. Data & Kafka Flow",
			"item": [
				{
					"name": "3.1 Trigger Collection (Activates Kafka)",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/collect/manual",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"collect",
								"manual"
							]
						},
						"description": "Lancia la raccolta dati. Con le soglie impostate a valori bassi, questo DEVE generare messaggi Kafka + mandare la mail.\n\n**Verifica:** Controlla i log su terminale di `alert-system` e `alert-notifier`."
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Job Started (200)\", function () { pm.response.to.have.status(200); });",
									"// Wait for OpenSky processing (Client side wait)",
									"setTimeout(function(){}, 3000);"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "3.2 Get Flights (All Types)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/flights/{{test_airport}}?email={{test_email}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"flights",
								"{{test_airport}}"
							],
							"query": [
								{
									"key": "email",
									"value": "{{test_email}}"
								}
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Flights Retrieved (200)\", function () { pm.response.to.have.status(200); });",
									"var jsonData = pm.response.json();",
									"if (jsonData.count === 0) { console.warn(\"Warning: No flights found.\"); }"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "3.3 Get Flights Statistics",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/flights/{{test_airport}}/stats/airlines?email={{test_email}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"flights",
								"{{test_airport}}",
								"stats",
								"airlines"
							],
							"query": [
								{
									"key": "email",
									"value": "{{test_email}}"
								}
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Status 200\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Returns Data\", function () { var j = pm.response.json(); pm.expect(j.data).to.be.an('array'); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "3.4 Get Latest Flight",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/flights/{{test_airport}}/latest?email={{test_email}}&type=departure",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"flights",
								"{{test_airport}}",
								"latest"
							],
							"query": [
								{
									"key": "email",
									"value": "{{test_email}}"
								},
								{
									"key": "type",
									"value": "departure"
								}
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Latest Flight Retrieved (200 or 404)\", function () { pm.expect(pm.response.code).to.be.oneOf([200, 404]); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "3.5 Get Latest Flight (Invalid Type - 400)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/flights/{{test_airport}}/latest?email={{test_email}}&type=invalid",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"flights",
								"{{test_airport}}",
								"latest"
							],
							"query": [
								{
									"key": "email",
									"value": "{{test_email}}"
								},
								{
									"key": "type",
									"value": "invalid"
								}
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Bad Request (400)\", function () { pm.response.to.have.status(400); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "3.6 Get Average Stats",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/flights/{{test_airport}}/average?email={{test_email}}&days=5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"flights",
								"{{test_airport}}",
								"average"
							],
							"query": [
								{
									"key": "email",
									"value": "{{test_email}}"
								},
								{
									"key": "days",
									"value": "5"
								}
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Averages Retrieved (200)\", function () { pm.response.to.have.status(200); });",
									"pm.test(\"Contains departure/arrival stats\", function () { var j = pm.response.json(); pm.expect(j).to.have.property('departure'); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "3.7 Security Check (Airport Not Followed)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/flights/LIMC?email={{test_email}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"flights",
								"LIMC"
							],
							"query": [
								{
									"key": "email",
									"value": "{{test_email}}"
								}
							]
						},
						"description": "Tenta di accedere a LIMC (non seguito dall'utente). Deve fallire."
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Forbidden (403)\", function () { pm.response.to.have.status(403); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "3.8 Validation Error (Date Logic)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/flights/{{test_airport}}?email={{test_email}}&start_date=2025-01-01&end_date=2024-01-01",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"flights",
								"{{test_airport}}"
							],
							"query": [
								{
									"key": "email",
									"value": "{{test_email}}"
								},
								{
									"key": "start_date",
									"value": "2025-01-01"
								},
								{
									"key": "end_date",
									"value": "2024-01-01"
								}
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Bad Date Logic (400)\", function () { pm.response.to.have.status(400); });"
								],
								"type": "text/javascript"
							}
						}
					]
				}
			]
		},
		{
			"name": "4. Cleanup",
			"item": [
				{
					"name": "4.1 Delete Manual Interest",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/interests?email={{test_email}}&airport_icao={{test_airport}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests"
							],
							"query": [
								{
									"key": "email",
									"value": "{{test_email}}"
								},
								{
									"key": "airport_icao",
									"value": "{{test_airport}}"
								}
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"Interest Removed (200)\", function () { pm.response.to.have.status(200); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "4.2 Delete User",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/{{test_email}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								"{{test_email}}"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"User Deleted (200)\", function () { pm.response.to.have.status(200); });"
								],
								"type": "text/javascript"
							}
						}
					]
				},
				{
					"name": "4.3 Verify Cleanup",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/interests/{{test_email}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"interests",
								"{{test_email}}"
							]
						}
					},
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test(\"User Gone (404)\", function () { pm.response.to.have.status(404); });"
								],
								"type": "text/javascript"
							}
						}
					]
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "https://localhost",
			"type": "string"
		},
		{
			"key": "test_email",
			"value": "dsbd.test@example.com",
			"type": "string"
		},
		{
			"key": "test_airport",
			"value": "LIRF",
			"type": "string"
		},
		{
			"key": "current_request_id",
			"value": "",
			"type": "string"
		}
	]
}
